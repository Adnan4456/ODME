<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>JtreeToGraphDelete.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">SESEditor</a> &gt; <a href="index.source.html" class="el_package">odme.jtreetograph</a> &gt; <span class="el_source">JtreeToGraphDelete.java</span></div><h1>JtreeToGraphDelete.java</h1><pre class="source lang-java linenums">package odme.jtreetograph;

import static behaviourtreetograph.JTreeToGraphBehaviour.benhaviourGraph;
import static odme.jtreetograph.JtreeToGraphVariables.*;

import java.awt.Toolkit;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import javax.swing.JComboBox;
import javax.swing.JOptionPane;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.TreeNode;
import javax.swing.tree.TreePath;

import com.mxgraph.model.mxCell;

import odme.odmeeditor.DynamicTree;
import odme.odmeeditor.Main;
import odme.odmeeditor.ODMEEditor;

<span class="nc" id="L25">public class JtreeToGraphDelete {</span>

<span class="nc" id="L27">	public static String selectedVariable = &quot;&quot;;</span>
<span class="nc" id="L28">	public static ArrayList&lt;mxCell&gt; deletableChildNodes = new ArrayList&lt;mxCell&gt;();</span>

	public static void deleteConstraintFromScenarioTableForUpdate(mxCell cellForAddingVariable, String variableName,
            String variableNameNew) {
<span class="nc bnc" id="L32" title="All 4 branches missed.">		if ((variableName != null) &amp;&amp; (!variableName.trim().isEmpty())) {</span>
<span class="nc" id="L33">			pathToRoot.add((String) cellForAddingVariable.getValue());</span>
<span class="nc" id="L34">			JtreeToGraphConvert.nodeToRootPathVar(cellForAddingVariable);</span>

<span class="nc" id="L36">			String[] stringArray = pathToRoot.toArray(new String[0]);</span>
<span class="nc" id="L37">			ArrayList&lt;String&gt; pathToRootRev = new ArrayList&lt;String&gt;();</span>

<span class="nc bnc" id="L39" title="All 2 branches missed.">			for (int i = stringArray.length - 1; i &gt;= 0; i--) {</span>
<span class="nc" id="L40">				pathToRootRev.add(stringArray[i]);</span>
			}

<span class="nc" id="L43">			String[] stringArrayRev = pathToRootRev.toArray(new String[0]);</span>
<span class="nc" id="L44">			TreePath treePathForVariable = JtreeToGraphGeneral.getTreeNodePath(stringArrayRev);</span>

<span class="nc" id="L46">			DefaultMutableTreeNode currentNode =</span>
<span class="nc" id="L47">					(DefaultMutableTreeNode) (treePathForVariable.getLastPathComponent());</span>
<span class="nc" id="L48">			TreeNode[] nodes = currentNode.getPath();</span>

			// have to delete that variable here
			// ---------------------------------------------------start
<span class="nc" id="L52">			int yv = 0;</span>
<span class="nc" id="L53">			TreePath keyDel = null;</span>
<span class="nc bnc" id="L54" title="All 2 branches missed.">			for (TreePath key : DynamicTree.constraintsList.keySet()) {</span>
<span class="nc" id="L55">				int a = 0;</span>
<span class="nc" id="L56">				DefaultMutableTreeNode currentNode2 = (DefaultMutableTreeNode) (key.getLastPathComponent());</span>
<span class="nc" id="L57">				TreeNode[] nodes2 = currentNode2.getPath();</span>

<span class="nc bnc" id="L59" title="All 2 branches missed.">				if (nodes.length == nodes2.length) {</span>
<span class="nc" id="L60">					int aa = 1;</span>
<span class="nc bnc" id="L61" title="All 2 branches missed.">					for (int i = 0; i &lt; nodes.length; i++) {</span>
<span class="nc bnc" id="L62" title="All 2 branches missed.">						if (!nodes[i].toString().equals(nodes2[i].toString())) {</span>
<span class="nc" id="L63">							aa = 0;</span>
<span class="nc" id="L64">							break;</span>
						}
					}
<span class="nc" id="L67">					a = aa;</span>
				}
<span class="nc bnc" id="L69" title="All 2 branches missed.">				if (a == 1) {</span>
<span class="nc bnc" id="L70" title="All 2 branches missed.">					for (String value : DynamicTree.constraintsList.get(key)) {</span>
<span class="nc bnc" id="L71" title="All 2 branches missed.">						if (value.equals(variableName)) {</span>
<span class="nc" id="L72">							yv = 1;</span>
<span class="nc" id="L73">							keyDel = key; // to avoid java.util.ConcurrentModificationException</span>
						}
<span class="nc" id="L75">					}</span>
				}
<span class="nc" id="L77">			}</span>
<span class="nc bnc" id="L78" title="All 2 branches missed.">			if (yv == 1) {</span>
<span class="nc" id="L79">				DynamicTree.constraintsList.remove(keyDel, variableName); // for removing only one values</span>
<span class="nc" id="L80">				yv = 0;</span>
			}

			// have to call a function to refresh the table view
<span class="nc" id="L84">			DynamicTree.constraintsList.put(treePathForVariable, variableNameNew);</span>
			// ---------------------------------------------------end

<span class="nc" id="L87">			pathToRoot.clear();</span>
<span class="nc" id="L88">			ODMEEditor.treePanel.showConstraintsInTable(treePathForVariable);</span>
		}
<span class="nc" id="L90">	}</span>


	public static void deleteBehaviourFromScenarioTableForUpdate(mxCell cellForAddingVariable, String variableName,
            String variableNameNew) {
<span class="nc bnc" id="L95" title="All 4 branches missed.">		if ((variableName != null) &amp;&amp; (!variableName.trim().isEmpty())) {</span>
<span class="nc" id="L96">			pathToRoot.add((String) cellForAddingVariable.getValue());</span>
<span class="nc" id="L97">			JtreeToGraphConvert.nodeToRootPathVar(cellForAddingVariable);</span>

<span class="nc" id="L99">			String[] stringArray = pathToRoot.toArray(new String[0]);</span>
<span class="nc" id="L100">			ArrayList&lt;String&gt; pathToRootRev = new ArrayList&lt;String&gt;();</span>

<span class="nc bnc" id="L102" title="All 2 branches missed.">			for (int i = stringArray.length - 1; i &gt;= 0; i--) {</span>
<span class="nc" id="L103">				pathToRootRev.add(stringArray[i]);</span>
			}

<span class="nc" id="L106">			String[] stringArrayRev = pathToRootRev.toArray(new String[0]);</span>
<span class="nc" id="L107">			TreePath treePathForVariable = JtreeToGraphGeneral.getTreeNodePath(stringArrayRev);</span>

<span class="nc" id="L109">			DefaultMutableTreeNode currentNode =</span>
<span class="nc" id="L110">					(DefaultMutableTreeNode) (treePathForVariable.getLastPathComponent());</span>
<span class="nc" id="L111">			TreeNode[] nodes = currentNode.getPath();</span>

			// have to delete that variable here
			// ---------------------------------------------------start
<span class="nc" id="L115">			int yv = 0;</span>
<span class="nc" id="L116">			TreePath keyDel = null;</span>
<span class="nc bnc" id="L117" title="All 2 branches missed.">			for (TreePath key : DynamicTree.behavioursList.keySet()) {</span>
<span class="nc" id="L118">				int a = 0;</span>
<span class="nc" id="L119">				DefaultMutableTreeNode currentNode2 = (DefaultMutableTreeNode) (key.getLastPathComponent());</span>
<span class="nc" id="L120">				TreeNode[] nodes2 = currentNode2.getPath();</span>

<span class="nc bnc" id="L122" title="All 2 branches missed.">				if (nodes.length == nodes2.length) {</span>
<span class="nc" id="L123">					int aa = 1;</span>
<span class="nc bnc" id="L124" title="All 2 branches missed.">					for (int i = 0; i &lt; nodes.length; i++) {</span>
<span class="nc bnc" id="L125" title="All 2 branches missed.">						if (!nodes[i].toString().equals(nodes2[i].toString())) {</span>
<span class="nc" id="L126">							aa = 0;</span>
<span class="nc" id="L127">							break;</span>
						}
					}
<span class="nc" id="L130">					a = aa;</span>
				}
<span class="nc bnc" id="L132" title="All 2 branches missed.">				if (a == 1) {</span>
<span class="nc bnc" id="L133" title="All 2 branches missed.">					for (String value : DynamicTree.behavioursList.get(key)) {</span>
<span class="nc bnc" id="L134" title="All 2 branches missed.">						if (value.equals(variableName)) {</span>
<span class="nc" id="L135">							yv = 1;</span>
<span class="nc" id="L136">							keyDel = key; // to avoid java.util.ConcurrentModificationException</span>
						}
<span class="nc" id="L138">					}</span>
				}
<span class="nc" id="L140">			}</span>
<span class="nc bnc" id="L141" title="All 2 branches missed.">			if (yv == 1) {</span>
<span class="nc" id="L142">				DynamicTree.behavioursList.remove(keyDel, variableName); // for removing only one values</span>
<span class="nc" id="L143">				yv = 0;</span>
			}

			// have to call a function to refresh the table view
<span class="nc" id="L147">			DynamicTree.behavioursList.put(treePathForVariable, variableNameNew);</span>
			// ---------------------------------------------------end

<span class="nc" id="L150">			pathToRoot.clear();</span>
<span class="nc" id="L151">			ODMEEditor.treePanel.showBehavioursInTable(treePathForVariable);</span>
		}
<span class="nc" id="L153">	}</span>

	public static void deleteVariableFromGraphPopup(Object pos) {
<span class="nc" id="L156">		String variableName = null;</span>
<span class="nc" id="L157">		mxCell cell = (mxCell) pos;</span>

		// all variables
<span class="nc" id="L160">		pathToRoot.add((String) cell.getValue());</span>
<span class="nc" id="L161">		JtreeToGraphConvert.nodeToRootPathVar(cell);</span>

<span class="nc" id="L163">		String[] stringArray = pathToRoot.toArray(new String[0]);</span>
<span class="nc" id="L164">		ArrayList&lt;String&gt; pathToRootRev = new ArrayList&lt;String&gt;();</span>

<span class="nc bnc" id="L166" title="All 2 branches missed.">		for (int i = stringArray.length - 1; i &gt;= 0; i--) {</span>
<span class="nc" id="L167">			pathToRootRev.add(stringArray[i]);</span>
		}

<span class="nc" id="L170">		String[] stringArrayRev = pathToRootRev.toArray(new String[0]);</span>

<span class="nc" id="L172">		TreePath treePathForVariable = JtreeToGraphGeneral.getTreeNodePath(stringArrayRev);</span>

<span class="nc" id="L174">		int b = 0;</span>
<span class="nc" id="L175">		String[] nodesToSelectedNode = new String[100];</span>
<span class="nc" id="L176">		nodesToSelectedNode[b] = &quot;Select Variable:&quot;;</span>
<span class="nc" id="L177">		b++;</span>

<span class="nc bnc" id="L179" title="All 2 branches missed.">		if (!(treePathForVariable == null)) {</span>
<span class="nc" id="L180">			DefaultMutableTreeNode currentNode =</span>
<span class="nc" id="L181">					(DefaultMutableTreeNode) (treePathForVariable.getLastPathComponent());</span>

<span class="nc" id="L183">			TreeNode[] nodes = currentNode.getPath();</span>

<span class="nc bnc" id="L185" title="All 2 branches missed.">			for (TreePath key : DynamicTree.varMap.keySet()) {</span>
<span class="nc" id="L186">				int a = 0;</span>

<span class="nc bnc" id="L188" title="All 2 branches missed.">				for (String value : DynamicTree.varMap.get(key)) {</span>
<span class="nc" id="L189">					DefaultMutableTreeNode currentNode2 =</span>
<span class="nc" id="L190">							(DefaultMutableTreeNode) (key.getLastPathComponent());</span>

<span class="nc" id="L192">					TreeNode[] nodes2 = currentNode2.getPath();</span>

<span class="nc bnc" id="L194" title="All 2 branches missed.">					if (nodes.length == nodes2.length) {</span>
<span class="nc" id="L195">						int aa = 1;</span>
<span class="nc bnc" id="L196" title="All 2 branches missed.">						for (int i = 0; i &lt; nodes.length; i++) {</span>
<span class="nc bnc" id="L197" title="All 2 branches missed.">							if (!nodes[i].toString().equals(nodes2[i].toString())) {</span>
<span class="nc" id="L198">								aa = 0;</span>
<span class="nc" id="L199">								break;</span>
							}
						}
<span class="nc" id="L202">						a = aa;</span>
					}

<span class="nc bnc" id="L205" title="All 2 branches missed.">					if (a == 1) {</span>
<span class="nc" id="L206">						nodesToSelectedNode[b] = value;</span>
<span class="nc" id="L207">						b++;</span>
					}
<span class="nc" id="L209">				}</span>
<span class="nc" id="L210">			}</span>
		}

		// java 8 way null removal
<span class="nc bnc" id="L214" title="All 4 branches missed.">		nodesToSelectedNode = Arrays.stream(nodesToSelectedNode).filter(s -&gt; (s != null &amp;&amp; s.length() &gt; 0))</span>
<span class="nc" id="L215">				.toArray(String[]::new);</span>

<span class="nc" id="L217">		JComboBox&lt;String&gt; variableList = new JComboBox&lt;String&gt;(nodesToSelectedNode);</span>
<span class="nc" id="L218">		variableList.addItemListener(new ItemListener() {</span>

			@Override
			public void itemStateChanged(ItemEvent e) {
<span class="nc" id="L222">				selectedVariable = variableList.getSelectedItem().toString().trim();</span>
<span class="nc" id="L223">			}</span>
		});

<span class="nc" id="L226">		Object[] message = {&quot;Variable:&quot;, variableList};</span>

<span class="nc" id="L228">		int option = JOptionPane</span>
<span class="nc" id="L229">				.showConfirmDialog(Main.frame, message, &quot;Please Select&quot;, JOptionPane.OK_CANCEL_OPTION,</span>
						JOptionPane.PLAIN_MESSAGE);

<span class="nc bnc" id="L232" title="All 2 branches missed.">		if (option == JOptionPane.OK_OPTION) {</span>
<span class="nc" id="L233">			variableName = selectedVariable;</span>

			// end of all variables

<span class="nc bnc" id="L237" title="All 4 branches missed.">			if ((variableName != null) &amp;&amp; (!variableName.trim().isEmpty())) {</span>
<span class="nc" id="L238">				DefaultMutableTreeNode currentNode =</span>
<span class="nc" id="L239">						(DefaultMutableTreeNode) (treePathForVariable.getLastPathComponent());</span>
<span class="nc" id="L240">				TreeNode[] nodes = currentNode.getPath();</span>

<span class="nc" id="L242">				int yv = 0;</span>
<span class="nc" id="L243">				TreePath keyDel = null;</span>
<span class="nc bnc" id="L244" title="All 2 branches missed.">				for (TreePath key : DynamicTree.varMap.keySet()) {</span>
<span class="nc" id="L245">					int a = 0;</span>
<span class="nc" id="L246">					DefaultMutableTreeNode currentNode2 =</span>
<span class="nc" id="L247">							(DefaultMutableTreeNode) (key.getLastPathComponent());</span>

<span class="nc" id="L249">					TreeNode[] nodes2 = currentNode2.getPath();</span>

<span class="nc bnc" id="L251" title="All 2 branches missed.">					if (nodes.length == nodes2.length) {</span>
<span class="nc" id="L252">						int aa = 1;</span>
<span class="nc bnc" id="L253" title="All 2 branches missed.">						for (int i = 0; i &lt; nodes.length; i++) {</span>

<span class="nc bnc" id="L255" title="All 2 branches missed.">							if (!nodes[i].toString().equals(nodes2[i].toString())) {</span>
<span class="nc" id="L256">								aa = 0;</span>
<span class="nc" id="L257">								break;</span>
							}
						}
<span class="nc" id="L260">						a = aa;</span>
					}
<span class="nc bnc" id="L262" title="All 2 branches missed.">					if (a == 1) {</span>
<span class="nc bnc" id="L263" title="All 2 branches missed.">						for (String value : DynamicTree.varMap.get(key)) {</span>
<span class="nc bnc" id="L264" title="All 2 branches missed.">							if (value.equals(variableName)) {</span>
<span class="nc" id="L265">								yv = 1;</span>
<span class="nc" id="L266">								keyDel = key; // to avoid java.util.ConcurrentModificationException</span>
							}
<span class="nc" id="L268">						}</span>
					}
<span class="nc" id="L270">				}</span>
<span class="nc bnc" id="L271" title="All 2 branches missed.">				if (yv == 1) {</span>
<span class="nc" id="L272">					DynamicTree.varMap.remove(keyDel, variableName); // for removing only one values</span>
<span class="nc" id="L273">					yv = 0;</span>
				}

				// have to call a function to refresh the table view
<span class="nc" id="L277">				ODMEEditor.treePanel.refreshVariableTable(treePathForVariable);</span>
				// ---------------------------------------------------end
<span class="nc" id="L279">				pathToRoot.clear();</span>
			}
		}
<span class="nc" id="L282">		selectedVariable = &quot;&quot;;</span>
<span class="nc" id="L283">	}</span>


	public static void deleteAllVariablesFromGraphPopup(Object pos) {
		// deleting all the variables of a node

<span class="nc" id="L289">		mxCell cellForAddingVariable = (mxCell) pos;</span>
<span class="nc" id="L290">		pathToRoot.add((String) cellForAddingVariable.getValue());</span>
<span class="nc" id="L291">		JtreeToGraphConvert.nodeToRootPathVar(cellForAddingVariable);</span>

<span class="nc" id="L293">		String[] stringArray = pathToRoot.toArray(new String[0]);</span>
<span class="nc" id="L294">		ArrayList&lt;String&gt; pathToRootRev = new ArrayList&lt;String&gt;();</span>

<span class="nc bnc" id="L296" title="All 2 branches missed.">		for (int i = stringArray.length - 1; i &gt;= 0; i--) {</span>
<span class="nc" id="L297">			pathToRootRev.add(stringArray[i]);</span>
		}

<span class="nc" id="L300">		String[] stringArrayRev = pathToRootRev.toArray(new String[0]);</span>

<span class="nc" id="L302">		TreePath treePathForVariable = JtreeToGraphGeneral.getTreeNodePath(stringArrayRev);</span>

<span class="nc" id="L304">		DefaultMutableTreeNode currentNode =</span>
<span class="nc" id="L305">				(DefaultMutableTreeNode) (treePathForVariable.getLastPathComponent());</span>
<span class="nc" id="L306">		TreeNode[] nodes = currentNode.getPath();</span>

		// have to delete that variable here
		// ---------------------------------------------------start

<span class="nc" id="L311">		List&lt;TreePath&gt; delKeys = new ArrayList&lt;TreePath&gt;();</span>

<span class="nc" id="L313">		int yv = 0;</span>
<span class="nc bnc" id="L314" title="All 2 branches missed.">		for (TreePath key : DynamicTree.varMap.keySet()) {</span>

<span class="nc" id="L316">			int a = 0;</span>
<span class="nc" id="L317">			DefaultMutableTreeNode currentNode2 = (DefaultMutableTreeNode) (key.getLastPathComponent());</span>
<span class="nc" id="L318">			TreeNode[] nodes2 = currentNode2.getPath();</span>

<span class="nc bnc" id="L320" title="All 2 branches missed.">			if (nodes.length == nodes2.length) {</span>
<span class="nc" id="L321">				int aa = 1;</span>
<span class="nc bnc" id="L322" title="All 2 branches missed.">				for (int i = 0; i &lt; nodes.length; i++) {</span>

<span class="nc bnc" id="L324" title="All 2 branches missed.">					if (!nodes[i].toString().equals(nodes2[i].toString())) {</span>
<span class="nc" id="L325">						aa = 0;</span>
<span class="nc" id="L326">						break;</span>
					}
				}
<span class="nc" id="L329">				a = aa;</span>
			}
<span class="nc bnc" id="L331" title="All 2 branches missed.">			if (a == 1) {</span>
<span class="nc" id="L332">				yv = 1;</span>
<span class="nc" id="L333">				delKeys.add(key);</span>
			}
<span class="nc" id="L335">		}</span>
<span class="nc bnc" id="L336" title="All 2 branches missed.">		if (yv == 1) {</span>
<span class="nc bnc" id="L337" title="All 2 branches missed.">			for (TreePath k : delKeys) {</span>
<span class="nc" id="L338">				DynamicTree.varMap.asMap().remove(k);</span>
<span class="nc" id="L339">				yv = 0;</span>
<span class="nc" id="L340">			}</span>
		}

		// have to call a function to refresh the table view
<span class="nc" id="L344">		ODMEEditor.treePanel.refreshVariableTable(treePathForVariable);</span>
		// ---------------------------------------------------end
<span class="nc" id="L346">		pathToRoot.clear();</span>
<span class="nc" id="L347">	}</span>


	public static void deleteAllConstraintFromGraphPopup(Object pos) {
		// deleting all the variables of a node

<span class="nc" id="L353">		mxCell cellForAddingVariable = (mxCell) pos;</span>
<span class="nc" id="L354">		pathToRoot.add((String) cellForAddingVariable.getValue());</span>
<span class="nc" id="L355">		JtreeToGraphConvert.nodeToRootPathVar(cellForAddingVariable);</span>

<span class="nc" id="L357">		String[] stringArray = pathToRoot.toArray(new String[0]);</span>
<span class="nc" id="L358">		ArrayList&lt;String&gt; pathToRootRev = new ArrayList&lt;String&gt;();</span>

<span class="nc bnc" id="L360" title="All 2 branches missed.">		for (int i = stringArray.length - 1; i &gt;= 0; i--) {</span>
<span class="nc" id="L361">			pathToRootRev.add(stringArray[i]);</span>
		}

<span class="nc" id="L364">		String[] stringArrayRev = pathToRootRev.toArray(new String[0]);</span>
<span class="nc" id="L365">		TreePath treePathForVariable = JtreeToGraphGeneral.getTreeNodePath(stringArrayRev);</span>

<span class="nc" id="L367">		DefaultMutableTreeNode currentNode =</span>
<span class="nc" id="L368">				(DefaultMutableTreeNode) (treePathForVariable.getLastPathComponent());</span>
<span class="nc" id="L369">		TreeNode[] nodes = currentNode.getPath();</span>

		// DynamicTree.varMap.put(treePathForVariable, variableName);
		// have to delete that variable here
		// ---------------------------------------------------start

<span class="nc" id="L375">		List&lt;TreePath&gt; delKeys = new ArrayList&lt;TreePath&gt;();</span>

<span class="nc" id="L377">		int yv = 0;</span>
<span class="nc bnc" id="L378" title="All 2 branches missed.">		for (TreePath key : DynamicTree.constraintsList.keySet()) {</span>

<span class="nc" id="L380">			int a = 0;</span>
<span class="nc" id="L381">			DefaultMutableTreeNode currentNode2 = (DefaultMutableTreeNode) (key.getLastPathComponent());</span>
<span class="nc" id="L382">			TreeNode[] nodes2 = currentNode2.getPath();</span>

<span class="nc bnc" id="L384" title="All 2 branches missed.">			if (nodes.length == nodes2.length) {</span>
<span class="nc" id="L385">				int aa = 1;</span>
<span class="nc bnc" id="L386" title="All 2 branches missed.">				for (int i = 0; i &lt; nodes.length; i++) {</span>

<span class="nc bnc" id="L388" title="All 2 branches missed.">					if (!nodes[i].toString().equals(nodes2[i].toString())) {</span>
<span class="nc" id="L389">						aa = 0;</span>
<span class="nc" id="L390">						break;</span>
					}
				}
<span class="nc" id="L393">				a = aa;</span>
			}
<span class="nc bnc" id="L395" title="All 2 branches missed.">			if (a == 1) {</span>
<span class="nc" id="L396">				yv = 1;</span>
<span class="nc" id="L397">				delKeys.add(key);</span>
			}
<span class="nc" id="L399">		}</span>
<span class="nc bnc" id="L400" title="All 2 branches missed.">		if (yv == 1) {</span>
<span class="nc bnc" id="L401" title="All 2 branches missed.">			for (TreePath k : delKeys) {</span>
<span class="nc" id="L402">				DynamicTree.constraintsList.asMap().remove(k);</span>
<span class="nc" id="L403">				yv = 0;</span>
<span class="nc" id="L404">			}</span>
		}

		// have to call a function to refresh the table view
<span class="nc" id="L408">		ODMEEditor.treePanel.showConstraintsInTable(treePathForVariable);</span>
		// ---------------------------------------------------end
<span class="nc" id="L410">		pathToRoot.clear();</span>
<span class="nc" id="L411">	}</span>

	public static void deleteNodeFromGraphPopup(Object pos) {
		// for deleting from tree at the same time
<span class="nc" id="L415">		mxCell cellForAddingVariable = (mxCell) pos;</span>

<span class="nc bnc" id="L417" title="All 2 branches missed.">		if (cellForAddingVariable.getId().startsWith(&quot;uniformity&quot;) &amp;&amp; !cellForAddingVariable.getId()</span>
<span class="nc bnc" id="L418" title="All 2 branches missed.">				.endsWith(&quot;RefNode&quot;)) {</span>

<span class="nc" id="L420">			boolean connected = JtreeToGraphCheck.isConnectedToRoot(cellForAddingVariable);</span>
<span class="nc" id="L421">			connectedToRoot = false;</span>
<span class="nc bnc" id="L422" title="All 2 branches missed.">			if (!connected) {</span>

<span class="nc" id="L424">				graph.getModel().beginUpdate();</span>
				try {
<span class="nc" id="L426">					graph.removeCells(new Object[] {cellForAddingVariable});</span>
				} finally {
<span class="nc" id="L428">					graph.getModel().endUpdate();</span>
<span class="nc" id="L429">				}</span>
			} else {
<span class="nc" id="L431">				JOptionPane.showMessageDialog(Main.frame,</span>
						&quot;You can not delete from here. Delete from the reference node.&quot;);
			}

<span class="nc" id="L435">		} else {</span>
<span class="nc" id="L436">			pathToRoot.add((String) cellForAddingVariable.getValue());</span>
<span class="nc" id="L437">			JtreeToGraphConvert.nodeToRootPathVar(cellForAddingVariable);</span>

<span class="nc" id="L439">			String[] stringArray = pathToRoot.toArray(new String[0]);</span>
<span class="nc" id="L440">			ArrayList&lt;String&gt; pathToRootRev = new ArrayList&lt;String&gt;();</span>

<span class="nc bnc" id="L442" title="All 2 branches missed.">			for (int i = stringArray.length - 1; i &gt;= 0; i--) {</span>
<span class="nc" id="L443">				pathToRootRev.add(stringArray[i]);</span>
			}

<span class="nc" id="L446">			String[] stringArrayRev = pathToRootRev.toArray(new String[0]);</span>

<span class="nc" id="L448">			TreePath treePathForVariable = JtreeToGraphGeneral.getTreeNodePath(stringArrayRev);</span>

			// calling function for deleting the node
<span class="nc" id="L451">			ODMEEditor.treePanel.removeCurrentNodeWithGraphDelete(treePathForVariable);</span>

<span class="nc" id="L453">			pathToRoot.clear();</span>

			// reference delete syn
<span class="nc bnc" id="L456" title="All 2 branches missed.">			if (!cellForAddingVariable.getId().endsWith(&quot;RefNode&quot;)) {</span>
<span class="nc" id="L457">				JtreeToGraphCheck.checkSubtreeNodeForSyncDelete(cellForAddingVariable);</span>
			}

			// if i put these delete section above tree node delete then it will not work
			// because before detecting it is deleting the node and could not find tree path

			// Object delcell = pos;
<span class="nc" id="L464">			final Toolkit toolkit = Toolkit.getDefaultToolkit();</span>

<span class="nc bnc" id="L466" title="All 2 branches missed.">			if (cellForAddingVariable != null) {</span>

<span class="nc" id="L468">				graph.getModel().beginUpdate();</span>
				try {
<span class="nc bnc" id="L470" title="All 2 branches missed.">					if (&quot;rootnode&quot;.equals(cellForAddingVariable.getId())) {</span>
<span class="nc" id="L471">						toolkit.beep();</span>

					} else {
<span class="nc" id="L474">						deletableChildNodes.add(cellForAddingVariable);</span>
<span class="nc" id="L475">						deleteAllChildNode(cellForAddingVariable);</span>
<span class="nc" id="L476">						mxCell[] allnodes = deletableChildNodes.toArray(new mxCell[0]);</span>
<span class="nc bnc" id="L477" title="All 2 branches missed.">						for (int i = 0; i &lt; allnodes.length; i++) {</span>
<span class="nc" id="L478">							mxCell a = allnodes[i];</span>
<span class="nc" id="L479">							graph.removeCells(new Object[] {a});</span>
<span class="nc" id="L480">							deletableChildNodes.clear();</span>
						}
					}
				} finally {
<span class="nc" id="L484">					graph.getModel().endUpdate();</span>
				}
			}
		}
<span class="nc" id="L488">	}</span>

	public static void deleteNodeFromGraphPopupReferenceDeleteSync(Object pos) {
		// for deleting from tree at the same time
<span class="nc" id="L492">		mxCell cellForAddingVariable = (mxCell) pos;</span>

<span class="nc" id="L494">		pathToRoot.add((String) cellForAddingVariable.getValue());</span>
<span class="nc" id="L495">		JtreeToGraphConvert.nodeToRootPathVar(cellForAddingVariable);</span>

<span class="nc" id="L497">		String[] stringArray = pathToRoot.toArray(new String[0]);</span>
<span class="nc" id="L498">		ArrayList&lt;String&gt; pathToRootRev = new ArrayList&lt;String&gt;();</span>

<span class="nc bnc" id="L500" title="All 2 branches missed.">		for (int i = stringArray.length - 1; i &gt;= 0; i--) {</span>
<span class="nc" id="L501">			pathToRootRev.add(stringArray[i]);</span>
		}

<span class="nc" id="L504">		String[] stringArrayRev = pathToRootRev.toArray(new String[0]);</span>
<span class="nc" id="L505">		TreePath treePathForVariable = JtreeToGraphGeneral.getTreeNodePath(stringArrayRev);</span>

		// calling function for deleting the node
<span class="nc" id="L508">		ODMEEditor.treePanel.removeCurrentNodeWithGraphDelete(treePathForVariable);</span>
<span class="nc" id="L509">		pathToRoot.clear();</span>

		// if i put these delete section above tree node delete then it will not work
		// because before detecting it is deleting the node and could not find tree path

<span class="nc" id="L514">		final Toolkit toolkit = Toolkit.getDefaultToolkit();</span>

<span class="nc bnc" id="L516" title="All 2 branches missed.">		if (cellForAddingVariable != null) {</span>

<span class="nc" id="L518">			graph.getModel().beginUpdate();</span>
			try {
<span class="nc bnc" id="L520" title="All 2 branches missed.">				if (&quot;rootnode&quot;.equals(cellForAddingVariable.getId())) {</span>
<span class="nc" id="L521">					toolkit.beep();</span>
				} else {
<span class="nc" id="L523">					deletableChildNodes.add(cellForAddingVariable);</span>
<span class="nc" id="L524">					deleteAllChildNode(cellForAddingVariable);</span>
<span class="nc" id="L525">					mxCell[] allnodes = deletableChildNodes.toArray(new mxCell[0]);</span>
<span class="nc bnc" id="L526" title="All 2 branches missed.">					for (int i = 0; i &lt; allnodes.length; i++) {</span>
<span class="nc" id="L527">						mxCell a = allnodes[i];</span>
<span class="nc" id="L528">						graph.removeCells(new Object[] {a});</span>
<span class="nc" id="L529">						deletableChildNodes.clear();</span>
					}
				}
			} finally {
<span class="nc" id="L533">				graph.getModel().endUpdate();</span>
			}
		}
<span class="nc" id="L536">	}</span>

	public static void deleteEdgeBehaviorWindow(Object pos){

<span class="nc" id="L540">		Object cell = benhaviourGraph.getModel().getTerminal(pos,false);</span>
<span class="nc" id="L541">		mxCell targetCell = (mxCell) cell;</span>

		// for deleting from tree at the same time
<span class="nc" id="L544">		pathToRoot.add((String) targetCell.getValue());</span>
<span class="nc" id="L545">		System.out.println(&quot;Path to root = &quot;+pathToRoot.toString());</span>
<span class="nc" id="L546">		JtreeToGraphConvert.nodeToRootPathBehavior(targetCell);</span>

<span class="nc" id="L548">		String[] stringArray = pathToRoot.toArray(new String[0]);</span>
<span class="nc" id="L549">		ArrayList&lt;String&gt; pathToRootRev = new ArrayList&lt;String&gt;();</span>

<span class="nc bnc" id="L551" title="All 2 branches missed.">		for (int i = stringArray.length - 1; i &gt;= 0; i--) {</span>
<span class="nc" id="L552">			pathToRootRev.add(stringArray[i]);</span>
		}

<span class="nc" id="L555">		String[] stringArrayRev = pathToRootRev.toArray(new String[0]);</span>
<span class="nc" id="L556">		TreePath treePathForBehavior = JtreeToGraphGeneral.getTreeNodePath(stringArrayRev);</span>

<span class="nc" id="L558">		System.out.println(&quot;Tree path = &quot; + treePathForBehavior);</span>
		// calling function for deleting the node
//		ODMEEditor.treePanel.removeCurrentNodeWithGraphDelete(treePathForVariable);
<span class="nc" id="L561">		pathToRoot.clear();</span>
<span class="nc" id="L562">		benhaviourGraph.getModel().beginUpdate();</span>
		try {
<span class="nc" id="L564">			benhaviourGraph.removeCells(new Object[] {pos});</span>
		} finally {
<span class="nc" id="L566">			benhaviourGraph.getModel().endUpdate();</span>
		}


<span class="nc" id="L570">	}</span>

	public static void deleteEdgeFromGraphPopup(Object pos) {
<span class="nc" id="L573">		Object cell = graph.getModel().getTerminal(pos, false);</span>
<span class="nc" id="L574">		mxCell targetCell = (mxCell) cell;</span>

		// for deleting from tree at the same time
<span class="nc" id="L577">		pathToRoot.add((String) targetCell.getValue());</span>
<span class="nc" id="L578">		JtreeToGraphConvert.nodeToRootPathVar(targetCell);</span>

<span class="nc" id="L580">		String[] stringArray = pathToRoot.toArray(new String[0]);</span>
<span class="nc" id="L581">		ArrayList&lt;String&gt; pathToRootRev = new ArrayList&lt;String&gt;();</span>

<span class="nc bnc" id="L583" title="All 2 branches missed.">		for (int i = stringArray.length - 1; i &gt;= 0; i--) {</span>
<span class="nc" id="L584">			pathToRootRev.add(stringArray[i]);</span>
		}

<span class="nc" id="L587">		String[] stringArrayRev = pathToRootRev.toArray(new String[0]);</span>
<span class="nc" id="L588">		TreePath treePathForVariable = JtreeToGraphGeneral.getTreeNodePath(stringArrayRev);</span>

		// calling function for deleting the node
<span class="nc" id="L591">		ODMEEditor.treePanel.removeCurrentNodeWithGraphDelete(treePathForVariable);</span>
<span class="nc" id="L592">		pathToRoot.clear();</span>
<span class="nc" id="L593">		graph.getModel().beginUpdate();</span>
		try {
<span class="nc" id="L595">			graph.removeCells(new Object[] {pos});</span>
		} finally {
<span class="nc" id="L597">			graph.getModel().endUpdate();</span>
		}
<span class="nc" id="L599">	}</span>

	private static void deleteAllChildNode(mxCell cell) {
<span class="nc" id="L602">		Object[] outgoing = graph.getOutgoingEdges(cell);</span>

<span class="nc bnc" id="L604" title="All 2 branches missed.">		if (outgoing.length &gt; 0) {</span>
<span class="nc bnc" id="L605" title="All 2 branches missed.">			for (int i = 0; i &lt; outgoing.length; i++) {</span>
<span class="nc" id="L606">				Object targetCell = graph.getModel().getTerminal(outgoing[i], false);</span>
<span class="nc" id="L607">				mxCell targetCell2 = (mxCell) targetCell;</span>
<span class="nc" id="L608">				deletableChildNodes.add(targetCell2);</span>
<span class="nc" id="L609">				deleteAllChildNode(targetCell2);</span>
			}
		}
<span class="nc" id="L612">	}</span>

	public static void deleteNodeFromGraphPopupForSubTree(Object pos) {
		// for deleting from tree at the same time
<span class="nc" id="L616">		mxCell cellForAddingVariable = (mxCell) pos;</span>
<span class="nc" id="L617">		final Toolkit toolkit = Toolkit.getDefaultToolkit();</span>

<span class="nc bnc" id="L619" title="All 2 branches missed.">		if (cellForAddingVariable != null) {</span>

<span class="nc" id="L621">			graph.getModel().beginUpdate();</span>
			try {
<span class="nc bnc" id="L623" title="All 2 branches missed.">				if (&quot;rootnode&quot;.equals(cellForAddingVariable.getId())) {</span>
<span class="nc" id="L624">					toolkit.beep();</span>
				} else {
<span class="nc" id="L626">					deletableChildNodes.add(cellForAddingVariable);</span>
<span class="nc" id="L627">					deleteAllChildNode(cellForAddingVariable);</span>
<span class="nc" id="L628">					mxCell[] allnodes = deletableChildNodes.toArray(new mxCell[0]);</span>
<span class="nc bnc" id="L629" title="All 2 branches missed.">					for (int i = 0; i &lt; allnodes.length; i++) {</span>
<span class="nc" id="L630">						mxCell a = allnodes[i];</span>
<span class="nc" id="L631">						graph.removeCells(new Object[] {a});</span>
<span class="nc" id="L632">						deletableChildNodes.clear();</span>
					}
				}
			} finally {
<span class="nc" id="L636">				graph.getModel().endUpdate();</span>
			}
		}
<span class="nc" id="L639">	}</span>

	public static void deleteNodeWithTree(String[] nodesToSelectedNode) {
<span class="nc" id="L642">		JtreeToGraphConvert.rootToSelectedNode(nodesToSelectedNode);</span>

		// below codes also used in another function. i can make a separate function
		// using this to make the code more understandable and organized.
<span class="nc" id="L646">		final Toolkit toolkit = Toolkit.getDefaultToolkit();</span>

<span class="nc bnc" id="L648" title="All 2 branches missed.">		if (lastNodeInPath != null) {</span>

<span class="nc" id="L650">			graph.getModel().beginUpdate();</span>
			try {
<span class="nc bnc" id="L652" title="All 2 branches missed.">				if (&quot;rootnode&quot;.equals(lastNodeInPath.getId())) {</span>
<span class="nc" id="L653">					toolkit.beep();</span>
				} else {
<span class="nc" id="L655">					deletableChildNodes.add(lastNodeInPath);</span>
<span class="nc" id="L656">					deleteAllChildNode(lastNodeInPath);</span>
<span class="nc" id="L657">					mxCell[] allnodes = deletableChildNodes.toArray(new mxCell[0]);</span>
<span class="nc bnc" id="L658" title="All 2 branches missed.">					for (int i = 0; i &lt; allnodes.length; i++) {</span>
<span class="nc" id="L659">						mxCell a = allnodes[i];</span>
<span class="nc" id="L660">						System.err.println(a.getValue());</span>
<span class="nc" id="L661">						graph.removeCells(new Object[] {a});</span>
<span class="nc" id="L662">						deletableChildNodes.clear();</span>
					}
				}
			} finally {
<span class="nc" id="L666">				graph.getModel().endUpdate();</span>
			}
		}
		// this variable is using by many functions. so have to make it null here so
		// that it will not affect others
<span class="nc" id="L671">		lastNodeInPath = null;</span>
<span class="nc" id="L672">	}</span>

	/**
	 * This function deletes all the nodes except root node during new project
	 * creation. Also changes the root name with new root name which is coming as an
	 * argument.
	 *
	 * @param newRootName
	 */
	public static void deleteAllNodesFromGraphWindow(String newRootName) {
<span class="nc" id="L682">		graph.getModel().beginUpdate();</span>
		try {
<span class="nc" id="L684">			Object[] cells = graph.getChildVertices(graph.getDefaultParent());</span>
<span class="nc bnc" id="L685" title="All 2 branches missed.">			for (Object x : cells) {</span>
<span class="nc" id="L686">				mxCell cell = (mxCell) x;</span>

<span class="nc bnc" id="L688" title="All 2 branches missed.">				if (cell.getId().equals(&quot;rootnode&quot;)) {</span>
<span class="nc" id="L689">					graph.getModel().setValue(cell, newRootName);</span>
				} else {
<span class="nc" id="L691">					graph.removeCells(new Object[] {x});</span>
				}
			}
		} finally {
<span class="nc" id="L695">			graph.getModel().endUpdate();</span>
		}
<span class="nc" id="L697">	}</span>

	public static void deleteVariableFromScenarioTableForUpdate(mxCell cellForAddingVariable, String variableName,
            String variableNameNew) {
<span class="nc bnc" id="L701" title="All 4 branches missed.">		if ((variableName != null) &amp;&amp; (!variableName.trim().isEmpty())) {</span>
<span class="nc" id="L702">			pathToRoot.add((String) cellForAddingVariable.getValue());</span>
<span class="nc" id="L703">			JtreeToGraphConvert.nodeToRootPathVar(cellForAddingVariable);</span>

<span class="nc" id="L705">			String[] stringArray = pathToRoot.toArray(new String[0]);</span>
<span class="nc" id="L706">			ArrayList&lt;String&gt; pathToRootRev = new ArrayList&lt;String&gt;();</span>

<span class="nc bnc" id="L708" title="All 2 branches missed.">			for (int i = stringArray.length - 1; i &gt;= 0; i--) {</span>
<span class="nc" id="L709">				pathToRootRev.add(stringArray[i]);</span>
			}

<span class="nc" id="L712">			String[] stringArrayRev = pathToRootRev.toArray(new String[0]);</span>
<span class="nc" id="L713">			TreePath treePathForVariable = JtreeToGraphGeneral.getTreeNodePath(stringArrayRev);</span>

<span class="nc" id="L715">			DefaultMutableTreeNode currentNode =</span>
<span class="nc" id="L716">					(DefaultMutableTreeNode) (treePathForVariable.getLastPathComponent());</span>
<span class="nc" id="L717">			TreeNode[] nodes = currentNode.getPath();</span>

			// DynamicTree.varMap.put(treePathForVariable, variableName);
			// have to delete that variable here
			// ---------------------------------------------------start
<span class="nc" id="L722">			int yv = 0;</span>
<span class="nc" id="L723">			TreePath keyDel = null;</span>
<span class="nc bnc" id="L724" title="All 2 branches missed.">			for (TreePath key : DynamicTree.varMap.keySet()) {</span>
<span class="nc" id="L725">				int a = 0;</span>
<span class="nc" id="L726">				DefaultMutableTreeNode currentNode2 = (DefaultMutableTreeNode) (key.getLastPathComponent());</span>

<span class="nc" id="L728">				TreeNode[] nodes2 = currentNode2.getPath();</span>

<span class="nc bnc" id="L730" title="All 2 branches missed.">				if (nodes.length == nodes2.length) {</span>

<span class="nc" id="L732">					int aa = 1;</span>
<span class="nc bnc" id="L733" title="All 2 branches missed.">					for (int i = 0; i &lt; nodes.length; i++) {</span>
<span class="nc bnc" id="L734" title="All 2 branches missed.">						if (!nodes[i].toString().equals(nodes2[i].toString())) {</span>
<span class="nc" id="L735">							aa = 0;</span>
<span class="nc" id="L736">							break;</span>
						}
					}
<span class="nc" id="L739">					a = aa;</span>
				}
<span class="nc bnc" id="L741" title="All 2 branches missed.">				if (a == 1) {</span>
<span class="nc bnc" id="L742" title="All 2 branches missed.">					for (String value : DynamicTree.varMap.get(key)) {</span>
<span class="nc bnc" id="L743" title="All 2 branches missed.">						if (value.equals(variableName)) {</span>
<span class="nc" id="L744">							yv = 1;</span>
<span class="nc" id="L745">							keyDel = key; // to avoid java.util.ConcurrentModificationException</span>
						}
<span class="nc" id="L747">					}</span>
				}
<span class="nc" id="L749">			}</span>
<span class="nc bnc" id="L750" title="All 2 branches missed.">			if (yv == 1) {</span>
				// DynamicTree.varMap.asMap().remove(keyDel);
<span class="nc" id="L752">				DynamicTree.varMap.remove(keyDel, variableName); // for removing only one values</span>
<span class="nc" id="L753">				yv = 0;</span>
			}

			// have to call a function to refresh the table view
			//ODMEEditor.treePanel.refreshVariableTable(treePathForVariable);
			// ---------------------------------------------------end

<span class="nc" id="L760">			pathToRoot.clear();</span>
<span class="nc" id="L761">			JtreeToGraphAdd.addVariableFromScenarioTableForUpdate(cellForAddingVariable, variableNameNew);</span>
		}
<span class="nc" id="L763">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>